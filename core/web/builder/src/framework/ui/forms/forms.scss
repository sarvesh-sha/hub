@import "../app.variables.scss";

@mixin forms($theme) {
    // mapped colors from theme
    $primary: map-get($theme, primary);
    $accent: map-get($theme, accent);
    $warn: map-get($theme, warn);
    $background: map-get($theme, background);
    $foreground: map-get($theme, foreground);

    // Forms
    //-----------------------------
    .mat-form-field {
        width: inherit;
        display: block;
        line-height: 1.25;

        o3-select, o3-string-set {
            color: rgba(0, 0, 0, 0.87);
            font-size: 16px;
        }

        &[hintlabel], &.mat-form-field-hint {
            margin-bottom: .8rem;

            .mat-hint {
                margin-top: .3rem;
            }
        }

        &.grow-to-fit {
            .mat-form-field-wrapper, .mat-form-field-infix {
                width: 100%;
            }
        }

        .mat-form-field-wrapper {
            .mat-form-field-flex {
                align-items: inherit;
            }
        }

        &.mat-form-field-type-o3-color-picker {
            > .mat-form-field-wrapper {
                height: 100%;

                > .mat-form-field-flex {
                    height: 100%;

                    o3-color-picker {
                        > button > .mat-button-focus-overlay {
                            display: none;
                        }
                    }
                }
            }

            .mat-form-field-underline {
                display: none;
            }
        }

        &.o3-textarea-border {
            border-top: 1px solid;
            border-color: #949494;
        }
    }

    .mat-icon-button.o3-no-ripple {
        .mat-button-focus-overlay {
            display: none;
        }
    }

    .o3-button-invalid {
        color: $invalid-form-color;
    }

    .hint-label {
        color: rgba(0, 0, 0, 0.54);
        font-size: 10.5px;
        font-weight: 400;
        line-height: 13px;
    }

    .overlay-input {

        .hint-label {
            margin-top: 5px;
        }
    }

    .date-time-picker {

        .hint-label {
            margin-top: -5px;
            margin-bottom: 5px;
        }
    }

    .mat-form-field-underline {
        background-color: rgba(0, 0, 0, 0.12);
        bottom: .75em !important;
    }

    .mat-form-field-wrapper {
        padding: .5em 0;
        max-width: 100%;
    }

    section.bs {
        .mat-form-field-label-wrapper {
            box-sizing: content-box;
        }
    }

    .mat-form-field-placeholder-wrapper {
        height: 125%;
    }

    .mat-select-value {
        line-height: 1.25;
        font-size: 16px;
    }

    .mat-select-placeholder {
        font-size: 14px;
        text-transform: uppercase;
    }

    .mat-select-placeholder.mat-floating-placeholder {
        text-transform: uppercase;
        top: -16px;
    }

    .mat-focused .mat-form-field-placeholder.mat-float,
    .mat-form-field-placeholder.mat-float:not(.mat-empty) {
        text-transform: uppercase;
        color: rgba(0, 0, 0, 0.65);

        .mat-placeholder-required {
            color: #f44336;
        }
    }

    .mat-form-field-can-float.mat-form-field-should-float .mat-form-field-placeholder {
        text-transform: uppercase;
        color: rgba(0, 0, 0, 0.38);
    }

    .mat-select-trigger {
        font-size: inherit;
    }

    .ng-valid {
        .mat-input-placeholder.mat-float.mat-focused,
        .mat-input-placeholder.mat-float:not(.mat-empty) {
            .mat-placeholder-required {
                color: inherit;
            }
        }
    }

    .mat-placeholder-required {
        font-size: 20px;
        vertical-align: text-top;
        color: #f44336;
    }

    .ng-valid .mat-placeholder-required {
        color: rgba(0, 0, 0, 0.65);
    }

    .o3-checkbox-container {
        display: flex;
        flex-wrap: wrap;

        > div {
            flex: 1 1 0px;
            padding: 0px 12px;
        }
    }

    mat-checkbox.o3-no-ripple {
        &.cdk-keyboard-focused, .mat-checkbox-inner-container:hover {
            .mat-checkbox-persistent-ripple {
                opacity: 0;
            }
        }
    }

    mat-checkbox {
        .mat-checkbox-layout {
            align-items: center;
            height: 20px;

            .mat-checkbox-label {
                line-height: 1em;
            }
        }
    }

    .mat-checkbox-container {
        > label {
            text-transform: uppercase;
            display: block !important;
            font-size: 75%;
            color: rgba(0, 0, 0, 0.38);
        }

        .mat-checkbox {
            margin-right: 15px;
        }
    }

    .mat-checkbox-indeterminate.mat-accent .mat-checkbox-background,
    .mat-checkbox-checked.mat-accent .mat-checkbox-background {
        background-color: #ffc107;
    }

    .mat-checkbox-disabled:not(.ignore-disabled-style).mat-checkbox-checked .mat-checkbox-background,
    .mat-checkbox-disabled:not(.ignore-disabled-style).mat-checkbox-indeterminate .mat-checkbox-background {
        background-color: #b0b0b0;
    }

    .mat-radio-group table {

        .mat-radio-button {
            margin-bottom: .5rem;
            margin-top: .5rem;

            label.mat-radio-label {
                margin-bottom: 0;
                margin-top: 0;

                .mat-radio-container {
                    vertical-align: text-top;
                }

                .mat-radio-label-content {
                    vertical-align: baseline;
                }
            }
        }
    }

    .mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle {
        border-color: rgba(0, 0, 0, 0.54);
    }

    .mat-raised-button.mat-primary[disabled],
    .mat-fab.mat-primary[disabled],
    .mat-mini-fab.mat-primary[disabled] {
        background-color: #B0BEC5;
        color: rgba(255, 255, 255, 0.5);
    }

    .button-block {
        display: block;
        width: 100%;
    }

    label.mat-slide-toggle-label {
        display: flex !important;
    }

    form .mat-slide-toggle-bar {
        display: inline-block;
        vertical-align: middle;
    }

    // Material Date Picker
    //-----------------------------
    .mat-calendar-body-disabled .mat-calendar-body-cell-content {
        color: rgba(0, 0, 0, 0.35);
    }

    .date-time-picker .mat-form-field-infix {
        width: unset;
    }

    .time-picker .mat-form-field-wrapper,
    .time-picker .mat-form-field-infix {
        padding-top: 0;
    }

    .o3-watermark-caption {
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
        color: #aeaeae;
        padding: 24px 16px;
    }

    // General form styling
    //-----------------------------
    .input-wrapper {
        padding: 7px 0px;
        margin: 0px;
        width: 100%;

        &.no-top {
            padding-top: 0px;
        }

        &.no-bottom {
            padding-bottom: 0px;
        }
    }

    .input-label {
        width: 100%;
        font-size: 14px;
        line-height: 1em;
        color: rgba(0, 0, 0, 0.54) !important;
        transform: scale(0.75) perspective(100px) translateZ(0.001px);
        transform-origin: 0 0;
        padding-bottom: 0.5em;
        margin-bottom: -0.25em;
        display: inline-block;
    }
}
