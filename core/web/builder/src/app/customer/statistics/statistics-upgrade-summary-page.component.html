<section class="bs page-content">
    <o3-tab-group>

        <o3-tab label="Upgrade Summary">

            <div class="row" *ngIf="!missingLookup">
                <div class="col-sm-12">
                    <mat-progress-spinner [mode]="'indeterminate'"></mat-progress-spinner>
                </div>
            </div>
            
            <div class="row" *ngIf="missingLookupKeys.length > 0">
                <div class="col-12">
                    <h2>Services not yet upgraded</h2>
                    <table class="table table-striped table-bordered">
                        <thead>
                        <tr>
                            <th>Fixup</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let item of missingLookupKeys">
                            <td>
                                {{item}}
                            </td>
                            <td>
                                <table class="table table-striped table-bordered">
                                    <thead>
                                    <tr>
                                        <th>Customer</th>
                                        <th>Service</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr *ngFor="let item2 of missingLookup[item]">
                                        <td>
                                            {{item2.custExt.model.name}}
                                        </td>
                                        <td>
                                            {{item2.svcExt.model.name}}
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="row" *ngIf="detailsUpToDate?.length > 0">
                <div class="col-12">
                    <h2>Services up to date</h2>
                    <table class="table table-striped table-bordered">
                        <thead>
                        <tr>
                            <th>Customer</th>
                            <th>Service</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let item of detailsUpToDate">
                            <td>
                                {{item.custExt.model.name}}
                            </td>
                            <td>
                                {{item.svcExt.model.name}}
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="row" *ngIf="detailsNoApi?.length > 0">
                <div class="col-12">
                    <h2>Services not reporting status</h2>
                    <table class="table table-striped table-bordered">
                        <thead>
                        <tr>
                            <th>Customer</th>
                            <th>Service</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let item of detailsNoApi">
                            <td>
                                {{item.custExt.model.name}}
                            </td>
                            <td>
                                {{item.svcExt.model.name}}
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </o3-tab>

    </o3-tab-group>
</section>
