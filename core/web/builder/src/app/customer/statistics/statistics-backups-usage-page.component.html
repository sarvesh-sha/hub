<section class="bs page-content">
    <o3-tab-group>

        <o3-tab label="Details about backups generated by Services">

            <div class="row" *ngIf="!backupsDetails">
                <div class="col-sm-12">
                    <mat-progress-spinner [mode]="'indeterminate'"></mat-progress-spinner>
                </div>
            </div>

            <mat-accordion *ngIf="backupsDetails">

                <mat-expansion-panel *ngFor="let backupDetails of backupsDetails" (expandedChange)="backupDetails.bindTable()">
                    <mat-expansion-panel-header>
                        <mat-panel-title>

                            <div class="row">
                                <div class="col-sm-6">
                                    {{backupDetails.kind}}
                                </div>
                                <div class="col-sm-3">
                                    {{backupDetails.count}} backups(s)
                                </div>
                            </div>
                        </mat-panel-title>
                    </mat-expansion-panel-header>

                    <div class="row">
                        <div class="col-sm-6">
                            <mat-form-field>
                                <input matInput type="text" placeholder="Filter Services" [(ngModel)]="backupDetails.filter" name="filter">
                            </mat-form-field>
                        </div>
                    </div>

                    <o3-datatable [table]="backupDetails.table" [showViewIcons]="false">
                        <o3-datatable-column id="customerName" prop="customerName" name="Customer"></o3-datatable-column>
                        <o3-datatable-column id="serviceName" prop="serviceName" name="Service"></o3-datatable-column>
                        <o3-datatable-column id="count" prop="count" format="NUMBER" name="Count"></o3-datatable-column>
                    </o3-datatable>

                </mat-expansion-panel>
            </mat-accordion>

        </o3-tab>

    </o3-tab-group>
</section>
